{"ast":null,"code":"import _classCallCheck from\"/Users/ragir/Desktop/bookswap workspace/bookswap-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/ragir/Desktop/bookswap workspace/bookswap-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/ragir/Desktop/bookswap workspace/bookswap-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/ragir/Desktop/bookswap workspace/bookswap-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{connect}from'react-redux';import{Button,Toast}from'react-bootstrap';import Navbar from'./NavBar';import Like from\"./Like.js\";import usersbookdata from'./usersbookdata.js';import'./Library.css';import{Row,Col}from'reactstrap';import{faHeart}from\"@fortawesome/free-solid-svg-icons\";import{faHeartBroken}from\"@fortawesome/free-solid-svg-icons\";import{FontAwesomeIcon}from\"@fortawesome/react-fontawesome\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Books=/*#__PURE__*/function(_Component){_inherits(Books,_Component);var _super=_createSuper(Books);function Books(){var _this;_classCallCheck(this,Books);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={message:\"\"};_this.stompClient=null;_this.connect=function(){var Stomp=require(\"stompjs\");var SockJS=require(\"sockjs-client\");SockJS=new SockJS(\"http://localhost:8080/ws\");_this.stompClient=Stomp.over(SockJS);_this.stompClient.connect({},_this.onConnected,_this.onError);};_this.onConnected=function(){console.log(\"connected\");console.log(_this.props.user);_this.stompClient.subscribe(\"/user/\"+_this.props.user.username+\"/queue/messages\",_this.onMessageReceived);_this.props.setWs({socket:_this.stompClient});};_this.onError=function(err){console.log(err);};_this.onMessageReceived=function(msg){var notification=JSON.parse(msg.body);console.log(notification);_this.setState({message:notification.senderId+notification.content});};_this.setShow=function(close){if(!close){_this.setState({message:null});}};return _this;}_createClass(Books,[{key:\"componentDidMount\",value:// write a function to call nearby books api\nfunction componentDidMount(){this.connect();}},{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/_jsxs(\"div\",{style:{margin:'10px'},children:[/*#__PURE__*/_jsx(Navbar,{}),/*#__PURE__*/_jsx(\"div\",{\"aria-live\":\"polite\",\"aria-atomic\":\"true\",style:{position:'relative'// minHeight: '100px',\n},children:/*#__PURE__*/_jsxs(Toast,{show:this.state.message,onClose:function onClose(){return _this2.setShow(false);},style:{position:'absolute',top:0,right:0},children:[/*#__PURE__*/_jsx(Toast.Header,{children:/*#__PURE__*/_jsx(\"strong\",{className:\"mr-auto\",children:\"Notification\"})}),/*#__PURE__*/_jsx(Toast.Body,{children:this.state.message})]})}),usersbookdata.map(function(_ref){var username=_ref.username,books=_ref.books;return/*#__PURE__*/ (// border: '2px solid #f4623a', \n_jsxs(\"div\",{style:{margin:'10px',padding:'10px'},children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-center\",children:/*#__PURE__*/_jsx(\"a\",{class:\"h4 mb-2 \",style:{textDecoration:'none'},children:username===_this2.props.user.username?'viniti':username})}),/*#__PURE__*/_jsx(\"hr\",{class:\"divider\"}),/*#__PURE__*/_jsx(Row,{children:books.map(function(_ref2){var title=_ref2.title,thumbnailUrl=_ref2.thumbnailUrl,authors=_ref2.authors,pageCount=_ref2.pageCount;return/*#__PURE__*/_jsx(Col,{md:2,children:/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"item\",children:/*#__PURE__*/_jsx(\"img\",{src:thumbnailUrl,className:\"card-img-top\",alt:\"...\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-muted mb-0\",children:title}),/*#__PURE__*/_jsx(\"p\",{className:\"card-text\",children:(authors,pageCount)}),/*#__PURE__*/_jsx(Like,{friend:username,title:title})]})]})});})})]}));})]});}}]);return Books;}(Component);var mapStateToProps=function mapStateToProps(state){return{user:state.userReducer};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return{setWs:function setWs(data){var action={type:'WS',payload:data};return dispatch(action);}};};export default connect(mapStateToProps,mapDispatchToProps)(Books);","map":{"version":3,"sources":["/Users/ragir/Desktop/bookswap workspace/bookswap-ui/src/Books.js"],"names":["React","Component","connect","Button","Toast","Navbar","Like","usersbookdata","Row","Col","faHeart","faHeartBroken","FontAwesomeIcon","Books","state","message","stompClient","Stomp","require","SockJS","over","onConnected","onError","console","log","props","user","subscribe","username","onMessageReceived","setWs","socket","err","msg","notification","JSON","parse","body","setState","senderId","content","setShow","close","margin","position","top","right","map","books","padding","textDecoration","title","thumbnailUrl","authors","pageCount","mapStateToProps","userReducer","mapDispatchToProps","dispatch","data","action","type","payload"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport { connect } from 'react-redux';\nimport { Button, Toast } from 'react-bootstrap'\nimport  Navbar  from './NavBar';\nimport Like from \"./Like.js\"\nimport usersbookdata from './usersbookdata.js';\nimport './Library.css'\nimport { Row, Col} from 'reactstrap'\nimport { faHeart } from \"@fortawesome/free-solid-svg-icons\";\nimport { faHeartBroken } from \"@fortawesome/free-solid-svg-icons\";\n\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\n\nclass Books extends Component {\n\n    state = {\n        message: \"\"\n    }\n\n    stompClient = null;\n\n    // write a function to call nearby books api\n\n    componentDidMount() {\n        this.connect();\n    }\n\n    connect = () => {\n        const Stomp = require(\"stompjs\");\n        var SockJS = require(\"sockjs-client\");\n        SockJS = new SockJS(\"http://localhost:8080/ws\");\n        this.stompClient = Stomp.over(SockJS);\n        this.stompClient.connect({}, this.onConnected, this.onError);\n    };\n\n    onConnected = () => {\n        console.log(\"connected\");\n        console.log(this.props.user)\n        this.stompClient.subscribe(\n            \"/user/\" + this.props.user.username + \"/queue/messages\",\n            this.onMessageReceived\n        );\n        this.props.setWs({ socket: this.stompClient });\n    };\n\n    onError = (err) => {\n        console.log(err);\n    };\n\n    onMessageReceived = (msg) => {\n        const notification = JSON.parse(msg.body);\n        console.log(notification)\n        this.setState({ message: notification.senderId + notification.content })\n    };\n\n    setShow = (close) => {\n        if(!close){\n            this.setState({message : null})\n        }\n        \n    }\n\n\n\n    render() {\n        return (\n            <div style={{ margin: '10px' }}>\n                <Navbar />\n                <div\n  aria-live=\"polite\"\n  aria-atomic=\"true\"\n  style={{\n    position: 'relative',\n    // minHeight: '100px',\n  }}\n>\n\n                <Toast show={this.state.message}  onClose={() => this.setShow(false)} style={{\n      position: 'absolute',\n      top: 0,\n      right: 0,\n    }}>\n  <Toast.Header>\n    <strong className=\"mr-auto\">Notification</strong>\n    {/* <small>11 mins ago</small> */}\n  </Toast.Header>\n  <Toast.Body>{this.state.message}</Toast.Body>\n</Toast>\n</div>\n                {/* {this.state.message} */}\n                {/* <Button\n                    onClick={() => this.sendMessage('priya21', 'Harry Potter')}\n                >SEND</Button> */}\n                {usersbookdata.map(({ username, books }) => (\n                    // border: '2px solid #f4623a', \n                    <div style={{ margin: '10px', padding: '10px' }}>\n                        <div className='text-center'>\n                            <a class=\"h4 mb-2 \" style={{ textDecoration: 'none' }}>{username === this.props.user.username ? 'viniti' : username}</a>\n                        </div>\n                        <hr class=\"divider\" />\n                        <Row>\n                            {books.map(({ title, thumbnailUrl, authors, pageCount }) => (\n                                <Col md={2}>\n\n                                    <div className=\"card\">\n                                        <div className=\"item\">\n                                            <img\n                                                src={thumbnailUrl}\n                                                className=\"card-img-top\"\n                                                alt=\"...\"\n                                            />\n                                        </div>\n                                        <div className=\"card-body\">\n                                            <p className=\"text-muted mb-0\">{title}</p>\n                                            <p className=\"card-text\">\n                                                {authors, pageCount}\n                                            </p>\n                                            {/* <a href=\"#!\" className=\"btn btn-primary\">Button</a> */}\n                                            <Like friend={username} title={title} />\n                                            {/* {this.sendMessage(username, title)} */}\n                                            {/* <a href=\"#!\" onclick=\"myFunction(this)\" className=\"like\"> \n                                            <img src=\"./icons/emptyHeart.jpg\" alt=\"Like\" width=\"32px\" height=\"32px\" viewBox=\"0 0 20 20\"> </img>\n                                        </a> */}\n\n                                        </div>\n\n\n                                        {/* <div class=\"card\" style={{width: '18 rem'}}>\n                                            <img class=\"card-img-top\" src=\"...\" alt=\"Card image cap\"/>\n                                            <div class=\"card-body\">\n                                                <p class=\"card-text\">Some quick example text to build on the card title and make up the bulk of the card's content.</p>\n                                            </div>\n                                        </div> */}\n                                    </div>\n                                </Col>\n                            ))}\n                        </Row>\n                    </div>\n\n                ))}\n\n\n                {/* books page which will be sorted by nearest place and grouped by username, like [{username1: [book1, book2]}, {username2: [book2,book3,book4]}]. */}\n            </div>\n        )\n    }\n}\n\nconst mapStateToProps = (state) => ({\n    user: state.userReducer\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n    setWs: (data) => {\n        const action = {\n            type: 'WS',\n            payload: data\n        }\n        return dispatch(action)\n    }\n})\n\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Books)"]},"metadata":{},"sourceType":"module"}