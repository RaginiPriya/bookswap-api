{"ast":null,"code":"var _jsxFileName = \"/Users/ragir/Desktop/bookswap workspace/bookswap-ui/src/Books.js\";\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { Button } from 'react-bootstrap';\nimport { Navbar } from 'reactstrap';\nimport Like from \"./Like.js\";\nimport usersbookdata from './usersbookdata.js';\nimport './Library.css';\nimport { Row, Col } from 'reactstrap';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass Books extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      message: \"\"\n    };\n    this.stompClient = null;\n\n    this.connect = () => {\n      const Stomp = require(\"stompjs\");\n\n      var SockJS = require(\"sockjs-client\");\n\n      SockJS = new SockJS(\"http://localhost:8080/ws\");\n      this.stompClient = Stomp.over(SockJS);\n      this.stompClient.connect({}, this.onConnected, this.onError);\n    };\n\n    this.onConnected = () => {\n      console.log(\"connected\");\n      this.stompClient.subscribe(\"/user/\" + this.props.user.username + \"/queue/messages\", this.onMessageReceived);\n    };\n\n    this.onError = err => {\n      console.log(err);\n    };\n\n    this.onMessageReceived = msg => {\n      const notification = JSON.parse(msg.body);\n      console.log(notification);\n      this.setState({\n        message: notification.content\n      });\n    };\n\n    this.sendMessage = () => {\n      var recipientId = '';\n\n      if (this.props.user.username === 'rags2095') {\n        recipientId = 'sivani1913';\n      } else {\n        recipientId = 'rags2095';\n      } // if (msg.trim() !== \"\") {\n\n\n      const message = {\n        senderId: this.props.user.username,\n        recipientId: recipientId,\n        senderName: this.props.user.username,\n        recipientName: recipientId,\n        content: 'Hi ' + recipientId + '! This is a message from ' + this.props.user.username,\n        timestamp: new Date()\n      };\n      this.stompClient.send(\"/app/chat\", {}, JSON.stringify(message)); // }\n    };\n  }\n\n  // write a function to call nearby books api\n  componentDidMount() {\n    this.connect();\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        margin: '10px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(Navbar, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 17\n      }, this), this.state.message, /*#__PURE__*/_jsxDEV(Button, {\n        onClick: this.sendMessage,\n        children: \"SEND\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 17\n      }, this), usersbookdata.map(({\n        username,\n        books\n      }) =>\n      /*#__PURE__*/\n      // border: '2px solid #f4623a', \n      _jsxDEV(\"div\", {\n        style: {\n          margin: '10px',\n          padding: '10px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"a\", {\n          class: \"h4 mb-2\",\n          style: {\n            textAlign: 'center'\n          },\n          children: username\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Row, {\n          children: books.map(({\n            title,\n            thumbnailUrl,\n            authors,\n            pageCount\n          }) => /*#__PURE__*/_jsxDEV(Col, {\n            md: 2,\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"card\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"item\",\n                children: /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: thumbnailUrl,\n                  className: \"card-img-top\",\n                  alt: \"...\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 91,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 90,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"card-body\",\n                children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n                  className: \"card-title\",\n                  children: title\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 98,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"card-text\",\n                  children: (authors, pageCount)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 99,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(Like, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 103,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 97,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 89,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 25\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 21\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nconst mapStateToProps = state => ({\n  user: state.userReducer\n});\n\nexport default connect(mapStateToProps)(Books);","map":{"version":3,"sources":["/Users/ragir/Desktop/bookswap workspace/bookswap-ui/src/Books.js"],"names":["React","Component","connect","Button","Navbar","Like","usersbookdata","Row","Col","Books","state","message","stompClient","Stomp","require","SockJS","over","onConnected","onError","console","log","subscribe","props","user","username","onMessageReceived","err","msg","notification","JSON","parse","body","setState","content","sendMessage","recipientId","senderId","senderName","recipientName","timestamp","Date","send","stringify","componentDidMount","render","margin","map","books","padding","textAlign","title","thumbnailUrl","authors","pageCount","mapStateToProps","userReducer"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport { connect } from 'react-redux';\nimport { Button } from 'react-bootstrap'\nimport { Navbar } from 'reactstrap';\nimport Like from \"./Like.js\"\nimport usersbookdata from './usersbookdata.js';\nimport './Library.css'\nimport {Row, Col} from 'reactstrap'\n\nclass Books extends Component {\n\n    state = {\n        message: \"\"\n    }\n\n    stompClient = null;\n\n    // write a function to call nearby books api\n    \n    componentDidMount(){\n        this.connect();\n    }\n\n    connect = () => {\n        const Stomp = require(\"stompjs\");\n        var SockJS = require(\"sockjs-client\");\n        SockJS = new SockJS(\"http://localhost:8080/ws\");\n        this.stompClient = Stomp.over(SockJS);\n        this.stompClient.connect({}, this.onConnected, this.onError);\n      };\n\n       onConnected = () => {\n        console.log(\"connected\");\n        this.stompClient.subscribe(\n          \"/user/\" + this.props.user.username + \"/queue/messages\",\n          this.onMessageReceived\n        );\n      };\n    \n       onError = (err) => {\n        console.log(err);\n      };\n\n      onMessageReceived = (msg) => {\n        const notification = JSON.parse(msg.body);\n        console.log(notification)\n        this.setState({message: notification.content})\n      };\n\n       sendMessage = () => {\n           var recipientId = '';\n           if(this.props.user.username === 'rags2095'){\n            recipientId = 'sivani1913'\n           }\n           else{\n               recipientId = 'rags2095'\n           }\n        // if (msg.trim() !== \"\") {\n          const message = {\n            senderId: this.props.user.username,\n            recipientId: recipientId,\n            senderName: this.props.user.username,\n            recipientName: recipientId,\n            content: 'Hi '+ recipientId + '! This is a message from ' + this.props.user.username,\n            timestamp: new Date(),\n          };\n          this.stompClient.send(\"/app/chat\", {}, JSON.stringify(message));\n    \n        // }\n      };\n\n    render() {\n        return(\n            <div style={{margin: '10px'}}>\n                <Navbar />\n                {this.state.message}\n                <Button\n                    onClick={this.sendMessage}\n                >SEND</Button>\n                {usersbookdata.map(({username, books}) => (\n                    // border: '2px solid #f4623a', \n                    <div style={{margin: '10px', padding: '10px'}}>\n                    <a class=\"h4 mb-2\" style={{textAlign: 'center'}}>{username}</a>\n\n                    <Row>\n                    {books.map(({title,thumbnailUrl,authors,pageCount}) => (\n                        <Col md={2}>\n\n                            <div className=\"card\">\n                                <div className=\"item\">\n                                    <img\n                                        src={thumbnailUrl}\n                                        className=\"card-img-top\"\n                                        alt=\"...\"\n                                    />\n                                </div>\n                                    <div className=\"card-body\">\n                                        <h5 className=\"card-title\">{title}</h5>\n                                        <p className=\"card-text\">\n                                        {authors,pageCount}\n                                        </p>\n                                        {/* <a href=\"#!\" className=\"btn btn-primary\">Button</a> */}\n                                        <Like/>\n                                        {/* <a href=\"#!\" onclick=\"myFunction(this)\" className=\"like\"> \n                                            <img src=\"./icons/emptyHeart.jpg\" alt=\"Like\" width=\"32px\" height=\"32px\" viewBox=\"0 0 20 20\"> </img>\n                                        </a> */}\n                                        \n                                    </div>\n\n                                        \n                                        {/* <div class=\"card\" style={{width: '18 rem'}}>\n                                            <img class=\"card-img-top\" src=\"...\" alt=\"Card image cap\"/>\n                                            <div class=\"card-body\">\n                                                <p class=\"card-text\">Some quick example text to build on the card title and make up the bulk of the card's content.</p>\n                                            </div>\n                                        </div> */}\n                            </div>\n                        </Col>\n                    ))}\n                </Row>\n                </div>\n\n                ))}\n                \n\n                {/* books page which will be sorted by nearest place and grouped by username, like [{username1: [book1, book2]}, {username2: [book2,book3,book4]}]. */}\n            </div>\n        )\n    }\n}\n\nconst mapStateToProps = (state) => ({\n    user: state.userReducer\n})\n\nexport default connect(mapStateToProps)(Books)"]},"metadata":{},"sourceType":"module"}