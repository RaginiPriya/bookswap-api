{"ast":null,"code":"import _classCallCheck from\"/Users/ragir/Desktop/bookswap workspace/bookswap-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/ragir/Desktop/bookswap workspace/bookswap-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/ragir/Desktop/bookswap workspace/bookswap-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/ragir/Desktop/bookswap workspace/bookswap-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{connect}from'react-redux';import{API_BASE_URL}from'./constants';import{Redirect}from'react-router-dom';import'./Login.css';// import {Alert} from 'react-bootstrap'\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Login=/*#__PURE__*/function(_Component){_inherits(Login,_Component);var _super=_createSuper(Login);function Login(){var _this;_classCallCheck(this,Login);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={usernameOrEmail:'',loginPassword:'',username:'',password:'',email:'',area:'',city:'',state:'',country:'',shouldRedirect:false// loginError: false\n};_this.login=function(event){if(event){event.preventDefault();}fetch(API_BASE_URL+'/api/auth/signin',{method:'post',headers:{'Accept':'application/json, text/plain, */*','Content-Type':'application/json'},body:JSON.stringify({usernameOrEmail:_this.state.usernameOrEmail,password:_this.state.loginPassword})}).then(function(res){return res.json();}).then(function(res){console.log(res);if(res.accessToken&&res.username){_this.props.setUser({token:res.accessToken,username:res.username});_this.setState({shouldRedirect:true});}}).catch(function(error){console.log(error);// error.json().then((body) => {\n//     console.log(body);\n// });\n// this.setState({loginError: true})\n});;};_this.signUp=function(event){event.preventDefault();fetch(API_BASE_URL+'/api/auth/signup',{method:'post',headers:{'Accept':'application/json, text/plain, */*','Content-Type':'application/json'},body:JSON.stringify({username:_this.state.username,password:_this.state.password,email:_this.state.email,area:_this.state.area,city:_this.state.city,state:_this.state.state,country:_this.state.country})}).then(function(res){return res.json();}).then(function(res){console.log(res);var usernameOrEmail=_this.state.username;var loginPassword=_this.state.password;_this.setState({usernameOrEmail:usernameOrEmail,loginPassword:loginPassword});_this.login();});};return _this;}_createClass(Login,[{key:\"render\",value:function render(){var _this2=this;var redirect=this.state.shouldRedirect?/*#__PURE__*/_jsx(Redirect,{to:\"/books\"}):null;//     const error = this.state.loginError ? \n//     (<Alert variant=\"danger\" onClose={() => this.setState({loginError: false}) } dismissable>\n//     <Alert.Heading>Oh snap!</Alert.Heading>\n//     <p>\n//       You have entered incorrect login details.\n//     </p>\n//   </Alert>)\n//   :\n//   null;\nreturn/*#__PURE__*/_jsxs(\"div\",{children:[redirect,/*#__PURE__*/_jsxs(\"div\",{class:\"container px-4 px-lg-5\",children:[/*#__PURE__*/_jsx(\"div\",{class:\"row gx-4 gx-lg-5 justify-content-center\",children:/*#__PURE__*/_jsxs(\"div\",{class:\"col-lg-8 col-xl-6 text-center\",children:[/*#__PURE__*/_jsx(\"h2\",{class:\"mt-0\",children:\"Log In\"}),/*#__PURE__*/_jsx(\"hr\",{class:\"divider\"}),/*#__PURE__*/_jsx(\"p\",{class:\"text-muted mb-5\",children:\"Connect with book lovers like you!\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"row gx-4 gx-lg-5 justify-content-center mb-5\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-lg-6\",children:/*#__PURE__*/_jsxs(\"form\",{id:\"loginForm\",onSubmit:this.login,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-floating mb-3\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"form-control\",id:\"email\",type:\"text\",value:this.state.usernameOrEmail,onChange:function onChange(e){return _this2.setState({usernameOrEmail:e.target.value});}}),/*#__PURE__*/_jsx(\"label\",{for:\"email\",children:\"Username or Email address\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-floating mb-3\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"form-control\",id:\"phone\",type:\"password\",value:this.state.loginPassword,onChange:function onChange(e){return _this2.setState({loginPassword:e.target.value});}}),/*#__PURE__*/_jsx(\"label\",{for:\"phone\",children:\"Password\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"d-grid\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary btn-xl\",id:\"loginButton\",type:\"submit\",children:\"Submit\"})})]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"row gx-4 gx-lg-5 justify-content-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"col-lg-4 text-center mb-5 mb-lg-0\",children:[/*#__PURE__*/_jsx(\"h2\",{class:\"mt-0\",children:\"Sign Up\"}),/*#__PURE__*/_jsx(\"hr\",{class:\"divider\"}),/*#__PURE__*/_jsx(\"p\",{class:\"text-muted mb-5\",children:\"It's quick and Easy.\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"row gx-4 gx-lg-5 justify-content-center mb-5\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-lg-6\",children:/*#__PURE__*/_jsxs(\"form\",{id:\"signupForm\",onSubmit:this.signUp,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-floating mb-3\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"form-control\",id:\"username\",type:\"text\",value:this.state.username,onChange:function onChange(e){return _this2.setState({username:e.target.value});}}),/*#__PURE__*/_jsx(\"label\",{for:\"username\",children:\"Username\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-floating mb-3\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"form-control\",id:\"email\",type:\"email\",value:this.state.email,onChange:function onChange(e){return _this2.setState({email:e.target.value});}}),/*#__PURE__*/_jsx(\"label\",{for:\"email\",children:\"Email\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-floating mb-3\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"form-control\",id:\"password\",type:\"password\",value:this.state.password,onChange:function onChange(e){return _this2.setState({password:e.target.value});}}),/*#__PURE__*/_jsx(\"label\",{for:\"password\",children:\"Password\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-floating mb-3\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"form-control\",id:\"area\",type:\"text\",value:this.state.area,onChange:function onChange(e){return _this2.setState({area:e.target.value});}}),/*#__PURE__*/_jsx(\"label\",{for:\"email\",children:\"Area\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-floating mb-3\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"form-control\",id:\"city\",type:\"text\",value:this.state.city,onChange:function onChange(e){return _this2.setState({city:e.target.value});}}),/*#__PURE__*/_jsx(\"label\",{for:\"city\",children:\"City\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-floating mb-3\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"form-control\",id:\"state\",type:\"text\",value:this.state.state,onChange:function onChange(e){return _this2.setState({state:e.target.value});}}),/*#__PURE__*/_jsx(\"label\",{for:\"state\",children:\"State\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-floating mb-3\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"form-control\",id:\"country\",type:\"text\",value:this.state.country,onChange:function onChange(e){return _this2.setState({country:e.target.value});}}),/*#__PURE__*/_jsx(\"label\",{for:\"country\",children:\"Country\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"d-grid\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary btn-xl\",id:\"signupButton\",type:\"submit\",children:\"Submit\"})})]})})})]})]});}}]);return Login;}(Component);var mapDispatchToProps=function mapDispatchToProps(dispatch){return{setUser:function setUser(data){var action={type:'SET_USER',payload:data};return dispatch(action);}};};export default connect(null,mapDispatchToProps)(Login);","map":{"version":3,"sources":["/Users/ragir/Desktop/bookswap workspace/bookswap-ui/src/Login.js"],"names":["React","Component","connect","API_BASE_URL","Redirect","Login","state","usernameOrEmail","loginPassword","username","password","email","area","city","country","shouldRedirect","login","event","preventDefault","fetch","method","headers","body","JSON","stringify","then","res","json","console","log","accessToken","props","setUser","token","setState","catch","error","signUp","redirect","e","target","value","mapDispatchToProps","dispatch","data","action","type","payload"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport { connect } from 'react-redux';\nimport { API_BASE_URL } from './constants'\nimport { Redirect } from 'react-router-dom'\nimport './Login.css'\n// import {Alert} from 'react-bootstrap'\n\nclass Login extends Component {\n\n    state = {\n        usernameOrEmail: '',\n        loginPassword: '',\n        username: '',\n        password: '',\n        email: '',\n        area: '',\n        city: '',\n        state: '',\n        country: '',\n        shouldRedirect: false,\n        // loginError: false\n    };\n\n    login = event => {\n        if(event){\n            event.preventDefault();\n        }\n        \n    \n        fetch(API_BASE_URL + '/api/auth/signin', {\n            method: 'post',\n            headers: {\n                'Accept': 'application/json, text/plain, */*',\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({ usernameOrEmail: this.state.usernameOrEmail, password: this.state.loginPassword })\n        }).then(res => res.json())\n            .then(res => {\n                console.log(res)\n                if (res.accessToken && res.username) {\n\n                    this.props.setUser({ token: res.accessToken, username: res.username })\n                    this.setState({ shouldRedirect: true })\n                }\n            }).catch(error => {\n                console.log(error);\n                // error.json().then((body) => {\n                //     console.log(body);\n                // });\n                // this.setState({loginError: true})\n            });\n    ;\n    }\n\n    signUp = event => {\n        event.preventDefault();\n    \n        fetch(API_BASE_URL + '/api/auth/signup', {\n            method: 'post',\n            headers: {\n                'Accept': 'application/json, text/plain, */*',\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({ username: this.state.username, password: this.state.password, email: this.state.email, area: this.state.area, city: this.state.city, state: this.state.state, country: this.state.country })\n        }).then(res => res.json())\n            .then(res => {\n                console.log(res)\n                const usernameOrEmail = this.state.username;\n                const loginPassword = this.state.password;\n                this.setState({usernameOrEmail : usernameOrEmail, loginPassword: loginPassword});\n                this.login();\n            }\n            );\n    }\n\n    render() {\n        const redirect = this.state.shouldRedirect ? <Redirect to=\"/books\" /> : null\n\n    //     const error = this.state.loginError ? \n    //     (<Alert variant=\"danger\" onClose={() => this.setState({loginError: false}) } dismissable>\n    //     <Alert.Heading>Oh snap!</Alert.Heading>\n    //     <p>\n    //       You have entered incorrect login details.\n    //     </p>\n    //   </Alert>)\n    //   :\n    //   null;\n\n        return (\n\n            <div>\n                {redirect}\n\n                <div class=\"container px-4 px-lg-5\">\n                    <div class=\"row gx-4 gx-lg-5 justify-content-center\">\n                        <div class=\"col-lg-8 col-xl-6 text-center\">\n                            <h2 class=\"mt-0\">Log In</h2>\n                            <hr class=\"divider\" />\n                            <p class=\"text-muted mb-5\">Connect with book lovers like you!</p>\n                        </div>\n                    </div>\n                    <div className=\"row gx-4 gx-lg-5 justify-content-center mb-5\">\n                        <div className=\"col-lg-6\">\n                            <form id=\"loginForm\" onSubmit={this.login}>\n                                <div className=\"form-floating mb-3\">\n                                    <input className=\"form-control\" id=\"email\" type=\"text\"  value={this.state.usernameOrEmail}\n                        onChange={e => this.setState({ usernameOrEmail: e.target.value })}/>\n                                    <label for=\"email\">Username or Email address</label>\n                                </div>\n                                <div className=\"form-floating mb-3\">\n                                    <input className=\"form-control\" id=\"phone\" type=\"password\" value={this.state.loginPassword}\n                        onChange={e => this.setState({ loginPassword: e.target.value })}/>\n                                    <label for=\"phone\">Password</label>\n                                </div>\n                                <div className=\"d-grid\"><button className=\"btn btn-primary btn-xl\" id=\"loginButton\" type=\"submit\">Submit</button></div>\n                            </form>\n                        </div>\n                    </div>\n                    <div className=\"row gx-4 gx-lg-5 justify-content-center\">\n                        <div className=\"col-lg-4 text-center mb-5 mb-lg-0\">\n                            <h2 class=\"mt-0\">Sign Up</h2>\n                            <hr class=\"divider\" />\n                            <p class=\"text-muted mb-5\">It's quick and Easy.</p>\n                        </div>\n                    </div>\n                    <div className=\"row gx-4 gx-lg-5 justify-content-center mb-5\">\n                        <div className=\"col-lg-6\">\n                            <form id=\"signupForm\" onSubmit={this.signUp}>\n                                <div className=\"form-floating mb-3\">\n                                    <input className=\"form-control\" id=\"username\" type=\"text\" value={this.state.username}\n                        onChange={e => this.setState({ username: e.target.value })}/>\n                                    <label for=\"username\">Username</label>\n                                </div>\n                                <div className=\"form-floating mb-3\">\n                                    <input className=\"form-control\" id=\"email\" type=\"email\" value={this.state.email}\n                        onChange={e => this.setState({ email: e.target.value })}/>\n                                    <label for=\"email\">Email</label>\n                                </div>\n                                <div className=\"form-floating mb-3\">\n                                    <input className=\"form-control\" id=\"password\" type=\"password\" value={this.state.password}\n                        onChange={e => this.setState({ password: e.target.value })}/>\n                                    <label for=\"password\">Password</label>\n                                </div>\n                                <div className=\"form-floating mb-3\">\n                                    <input className=\"form-control\" id=\"area\" type=\"text\" value={this.state.area}\n                        onChange={e => this.setState({ area: e.target.value })}/>\n                                    <label for=\"email\">Area</label>\n                                </div>\n                                <div className=\"form-floating mb-3\">\n                                    <input className=\"form-control\" id=\"city\" type=\"text\" value={this.state.city}\n                        onChange={e => this.setState({ city: e.target.value })}/>\n                                    <label for=\"city\">City</label>\n                                </div>\n                                <div className=\"form-floating mb-3\">\n                                    <input className=\"form-control\" id=\"state\" type=\"text\" value={this.state.state}\n                        onChange={e => this.setState({ state: e.target.value })}/>\n                                    <label for=\"state\">State</label>\n                                </div>\n                                <div className=\"form-floating mb-3\">\n                                    <input className=\"form-control\" id=\"country\" type=\"text\" value={this.state.country}\n                        onChange={e => this.setState({ country: e.target.value })}/>\n                                    <label for=\"country\">Country</label>\n                                </div>\n                                <div className=\"d-grid\"><button className=\"btn btn-primary btn-xl\" id=\"signupButton\" type=\"submit\">Submit</button></div>\n                            </form>\n                        </div>\n                    </div>\n                </div>\n\n\n                {/* sign up/login page, with email, username, password, name, area, city, state, country. (if email or username is already registered, we will throw error). */}\n            </div>\n        )\n    }\n}\n\nconst mapDispatchToProps = (dispatch) => ({\n    setUser: (data) => {\n        const action = {\n            type: 'SET_USER',\n            payload: data\n        }\n        return dispatch(action)\n    }\n})\n\nexport default connect(null, mapDispatchToProps)(Login)"]},"metadata":{},"sourceType":"module"}