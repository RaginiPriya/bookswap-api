{"ast":null,"code":"var _jsxFileName = \"/Users/ragir/Desktop/bookswap workspace/bookswap-ui/src/Books.js\";\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { Button, Toast } from 'react-bootstrap';\nimport { Navbar } from 'reactstrap';\nimport Like from \"./Like.js\";\nimport usersbookdata from './usersbookdata.js';\nimport './Library.css';\nimport { Row, Col } from 'reactstrap';\nimport { faHeart } from \"@fortawesome/free-solid-svg-icons\";\nimport { faHeartBroken } from \"@fortawesome/free-solid-svg-icons\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass Books extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      message: \"\"\n    };\n    this.stompClient = null;\n\n    this.connect = () => {\n      const Stomp = require(\"stompjs\");\n\n      var SockJS = require(\"sockjs-client\");\n\n      SockJS = new SockJS(\"http://localhost:8080/ws\");\n      this.stompClient = Stomp.over(SockJS);\n      this.stompClient.connect({}, this.onConnected, this.onError);\n    };\n\n    this.onConnected = () => {\n      console.log(\"connected\");\n      console.log(this.props.user);\n      this.stompClient.subscribe(\"/user/\" + this.props.user.username + \"/queue/messages\", this.onMessageReceived);\n      this.props.setWs({\n        socket: this.stompClient\n      });\n    };\n\n    this.onError = err => {\n      console.log(err);\n    };\n\n    this.onMessageReceived = msg => {\n      const notification = JSON.parse(msg.body);\n      console.log(notification);\n      this.setState({\n        message: notification.content\n      });\n    };\n\n    this.setShow = close => {\n      if (!close) {\n        this.setState({\n          message: null\n        });\n      }\n    };\n  }\n\n  // write a function to call nearby books api\n  componentDidMount() {\n    this.connect();\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        margin: '10px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(Navbar, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        \"aria-live\": \"polite\",\n        \"aria-atomic\": \"true\",\n        style: {\n          position: 'relative' // minHeight: '100px',\n\n        },\n        children: /*#__PURE__*/_jsxDEV(Toast, {\n          show: this.state.message,\n          onClose: () => this.setShow(false),\n          style: {\n            position: 'absolute',\n            top: 0,\n            right: 0\n          },\n          children: [/*#__PURE__*/_jsxDEV(Toast.Header, {\n            children: /*#__PURE__*/_jsxDEV(\"strong\", {\n              className: \"mr-auto\",\n              children: \"Notification\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 84,\n              columnNumber: 5\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 3\n          }, this), /*#__PURE__*/_jsxDEV(Toast.Body, {\n            children: this.state.message\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 3\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 17\n      }, this), usersbookdata.map(({\n        username,\n        books\n      }) =>\n      /*#__PURE__*/\n      // border: '2px solid #f4623a', \n      _jsxDEV(\"div\", {\n        style: {\n          margin: '10px',\n          padding: '10px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-center\",\n          children: /*#__PURE__*/_jsxDEV(\"a\", {\n            class: \"h4 mb-2 \",\n            style: {\n              textDecoration: 'none'\n            },\n            children: username\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"hr\", {\n          class: \"divider\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(Row, {\n          children: books.map(({\n            title,\n            thumbnailUrl,\n            authors,\n            pageCount\n          }) => /*#__PURE__*/_jsxDEV(Col, {\n            md: 2,\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"card\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"item\",\n                children: /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: thumbnailUrl,\n                  className: \"card-img-top\",\n                  alt: \"...\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 107,\n                  columnNumber: 45\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 106,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"card-body\",\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-muted mb-0\",\n                  children: title\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 114,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"card-text\",\n                  children: (authors, pageCount)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 115,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(Like, {\n                  friend: username,\n                  title: title\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 119,\n                  columnNumber: 45\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 113,\n                columnNumber: 41\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 105,\n              columnNumber: 37\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 103,\n            columnNumber: 33\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 21\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nconst mapStateToProps = state => ({\n  user: state.userReducer\n});\n\nconst mapDispatchToProps = dispatch => ({\n  setWs: data => {\n    const action = {\n      type: 'WS',\n      payload: data\n    };\n    return dispatch(action);\n  }\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Books);","map":{"version":3,"sources":["/Users/ragir/Desktop/bookswap workspace/bookswap-ui/src/Books.js"],"names":["React","Component","connect","Button","Toast","Navbar","Like","usersbookdata","Row","Col","faHeart","faHeartBroken","FontAwesomeIcon","Books","state","message","stompClient","Stomp","require","SockJS","over","onConnected","onError","console","log","props","user","subscribe","username","onMessageReceived","setWs","socket","err","msg","notification","JSON","parse","body","setState","content","setShow","close","componentDidMount","render","margin","position","top","right","map","books","padding","textDecoration","title","thumbnailUrl","authors","pageCount","mapStateToProps","userReducer","mapDispatchToProps","dispatch","data","action","type","payload"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport { connect } from 'react-redux';\nimport { Button, Toast } from 'react-bootstrap'\nimport { Navbar } from 'reactstrap';\nimport Like from \"./Like.js\"\nimport usersbookdata from './usersbookdata.js';\nimport './Library.css'\nimport { Row, Col} from 'reactstrap'\nimport { faHeart } from \"@fortawesome/free-solid-svg-icons\";\nimport { faHeartBroken } from \"@fortawesome/free-solid-svg-icons\";\n\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\n\nclass Books extends Component {\n\n    state = {\n        message: \"\"\n    }\n\n    stompClient = null;\n\n    // write a function to call nearby books api\n\n    componentDidMount() {\n        this.connect();\n    }\n\n    connect = () => {\n        const Stomp = require(\"stompjs\");\n        var SockJS = require(\"sockjs-client\");\n        SockJS = new SockJS(\"http://localhost:8080/ws\");\n        this.stompClient = Stomp.over(SockJS);\n        this.stompClient.connect({}, this.onConnected, this.onError);\n    };\n\n    onConnected = () => {\n        console.log(\"connected\");\n        console.log(this.props.user)\n        this.stompClient.subscribe(\n            \"/user/\" + this.props.user.username + \"/queue/messages\",\n            this.onMessageReceived\n        );\n        this.props.setWs({ socket: this.stompClient });\n    };\n\n    onError = (err) => {\n        console.log(err);\n    };\n\n    onMessageReceived = (msg) => {\n        const notification = JSON.parse(msg.body);\n        console.log(notification)\n        this.setState({ message: notification.content })\n    };\n\n    setShow = (close) => {\n        if(!close){\n            this.setState({message : null})\n        }\n        \n    }\n\n\n\n    render() {\n        return (\n            <div style={{ margin: '10px' }}>\n                <Navbar />\n                <div\n  aria-live=\"polite\"\n  aria-atomic=\"true\"\n  style={{\n    position: 'relative',\n    // minHeight: '100px',\n  }}\n>\n\n                <Toast show={this.state.message}  onClose={() => this.setShow(false)} style={{\n      position: 'absolute',\n      top: 0,\n      right: 0,\n    }}>\n  <Toast.Header>\n    <strong className=\"mr-auto\">Notification</strong>\n    {/* <small>11 mins ago</small> */}\n  </Toast.Header>\n  <Toast.Body>{this.state.message}</Toast.Body>\n</Toast>\n</div>\n                {/* {this.state.message} */}\n                {/* <Button\n                    onClick={() => this.sendMessage('priya21', 'Harry Potter')}\n                >SEND</Button> */}\n                {usersbookdata.map(({ username, books }) => (\n                    // border: '2px solid #f4623a', \n                    <div style={{ margin: '10px', padding: '10px' }}>\n                        <div className='text-center'>\n                            <a class=\"h4 mb-2 \" style={{ textDecoration: 'none' }}>{username}</a>\n                        </div>\n                        <hr class=\"divider\" />\n                        <Row>\n                            {books.map(({ title, thumbnailUrl, authors, pageCount }) => (\n                                <Col md={2}>\n\n                                    <div className=\"card\">\n                                        <div className=\"item\">\n                                            <img\n                                                src={thumbnailUrl}\n                                                className=\"card-img-top\"\n                                                alt=\"...\"\n                                            />\n                                        </div>\n                                        <div className=\"card-body\">\n                                            <p className=\"text-muted mb-0\">{title}</p>\n                                            <p className=\"card-text\">\n                                                {authors, pageCount}\n                                            </p>\n                                            {/* <a href=\"#!\" className=\"btn btn-primary\">Button</a> */}\n                                            <Like friend={username} title={title} />\n                                            {/* {this.sendMessage(username, title)} */}\n                                            {/* <a href=\"#!\" onclick=\"myFunction(this)\" className=\"like\"> \n                                            <img src=\"./icons/emptyHeart.jpg\" alt=\"Like\" width=\"32px\" height=\"32px\" viewBox=\"0 0 20 20\"> </img>\n                                        </a> */}\n\n                                        </div>\n\n\n                                        {/* <div class=\"card\" style={{width: '18 rem'}}>\n                                            <img class=\"card-img-top\" src=\"...\" alt=\"Card image cap\"/>\n                                            <div class=\"card-body\">\n                                                <p class=\"card-text\">Some quick example text to build on the card title and make up the bulk of the card's content.</p>\n                                            </div>\n                                        </div> */}\n                                    </div>\n                                </Col>\n                            ))}\n                        </Row>\n                    </div>\n\n                ))}\n\n\n                {/* books page which will be sorted by nearest place and grouped by username, like [{username1: [book1, book2]}, {username2: [book2,book3,book4]}]. */}\n            </div>\n        )\n    }\n}\n\nconst mapStateToProps = (state) => ({\n    user: state.userReducer\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n    setWs: (data) => {\n        const action = {\n            type: 'WS',\n            payload: data\n        }\n        return dispatch(action)\n    }\n})\n\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Books)"]},"metadata":{},"sourceType":"module"}