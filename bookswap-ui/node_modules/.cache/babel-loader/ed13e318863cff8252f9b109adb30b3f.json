{"ast":null,"code":"var _jsxFileName = \"/Users/ragir/Desktop/bookswap workspace/bookswap-ui/src/Books.js\";\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { Button } from 'react-bootstrap';\nimport { Navbar } from 'reactstrap';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass Books extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      message: \"\"\n    };\n    this.stompClient = null;\n\n    this.connect = () => {\n      const Stomp = require(\"stompjs\");\n\n      var SockJS = require(\"sockjs-client\");\n\n      SockJS = new SockJS(\"http://localhost:8080/ws\");\n      this.stompClient = Stomp.over(SockJS);\n      this.stompClient.connect({}, this.onConnected, this.onError);\n    };\n\n    this.onConnected = () => {\n      console.log(\"connected\");\n      this.stompClient.subscribe(\"/user/\" + this.props.user.username + \"/queue/messages\", this.onMessageReceived);\n    };\n\n    this.onError = err => {\n      console.log(err);\n    };\n\n    this.onMessageReceived = msg => {\n      const notification = JSON.parse(msg.body);\n      console.log(notification);\n      this.setState({\n        message: notification.content\n      });\n    };\n\n    this.sendMessage = () => {\n      var recipientId = '';\n\n      if (this.props.user.username === 'rags2095') {\n        recipientId = 'sivani1913';\n      } else {\n        recipientId = 'rags2095';\n      } // if (msg.trim() !== \"\") {\n\n\n      const message = {\n        senderId: this.props.user.username,\n        recipientId: recipientId,\n        senderName: this.props.user.username,\n        recipientName: recipientId,\n        content: 'Hi ' + recipientId + '! This is a message from ' + this.props.user.username,\n        timestamp: new Date()\n      };\n      this.stompClient.send(\"/app/chat\", {}, JSON.stringify(message)); // }\n    };\n  }\n\n  // write a function to call nearby books api\n  componentDidMount() {\n    this.connect();\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(Navbar, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 17\n      }, this), this.state.message, /*#__PURE__*/_jsxDEV(Button, {\n        onClick: this.sendMessage,\n        children: \"SEND\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nconst mapStateToProps = state => ({\n  user: state.userReducer\n});\n\nexport default connect(mapStateToProps)(Books);","map":{"version":3,"sources":["/Users/ragir/Desktop/bookswap workspace/bookswap-ui/src/Books.js"],"names":["React","Component","connect","Button","Navbar","Books","state","message","stompClient","Stomp","require","SockJS","over","onConnected","onError","console","log","subscribe","props","user","username","onMessageReceived","err","msg","notification","JSON","parse","body","setState","content","sendMessage","recipientId","senderId","senderName","recipientName","timestamp","Date","send","stringify","componentDidMount","render","mapStateToProps","userReducer"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport { connect } from 'react-redux';\nimport { Button } from 'react-bootstrap'\nimport { Navbar } from 'reactstrap';\n\nclass Books extends Component {\n\n    state = {\n        message: \"\"\n    }\n\n    stompClient = null;\n\n    // write a function to call nearby books api\n    \n    componentDidMount(){\n        this.connect();\n    }\n\n    connect = () => {\n        const Stomp = require(\"stompjs\");\n        var SockJS = require(\"sockjs-client\");\n        SockJS = new SockJS(\"http://localhost:8080/ws\");\n        this.stompClient = Stomp.over(SockJS);\n        this.stompClient.connect({}, this.onConnected, this.onError);\n      };\n\n       onConnected = () => {\n        console.log(\"connected\");\n        this.stompClient.subscribe(\n          \"/user/\" + this.props.user.username + \"/queue/messages\",\n          this.onMessageReceived\n        );\n      };\n    \n       onError = (err) => {\n        console.log(err);\n      };\n\n      onMessageReceived = (msg) => {\n        const notification = JSON.parse(msg.body);\n        console.log(notification)\n        this.setState({message: notification.content})\n      };\n\n       sendMessage = () => {\n           var recipientId = '';\n           if(this.props.user.username === 'rags2095'){\n            recipientId = 'sivani1913'\n           }\n           else{\n               recipientId = 'rags2095'\n           }\n        // if (msg.trim() !== \"\") {\n          const message = {\n            senderId: this.props.user.username,\n            recipientId: recipientId,\n            senderName: this.props.user.username,\n            recipientName: recipientId,\n            content: 'Hi '+ recipientId + '! This is a message from ' + this.props.user.username,\n            timestamp: new Date(),\n          };\n          this.stompClient.send(\"/app/chat\", {}, JSON.stringify(message));\n    \n        // }\n      };\n\n    render() {\n        return(\n            <div>\n                <Navbar />\n                {this.state.message}\n                <Button\n                    onClick={this.sendMessage}\n                >SEND</Button>\n                {/* books page which will be sorted by nearest place and grouped by username, like [{username1: [book1, book2]}, {username2: [book2,book3,book4]}]. */}\n            </div>\n        )\n    }\n}\n\nconst mapStateToProps = (state) => ({\n    user: state.userReducer\n})\n\nexport default connect(mapStateToProps)(Books)"]},"metadata":{},"sourceType":"module"}